package com.github.bat333.stockroom.nãoIrgit;

import com.github.bat333.stockroom.domain.Part;
import com.github.bat333.stockroom.domain.Sector;
import com.github.bat333.stockroom.model.DataPart;
import com.github.bat333.stockroom.model.DataSector;
import com.github.bat333.stockroom.repository.PartRepository;
import com.github.bat333.stockroom.repository.SectorRepository;
import jakarta.annotation.PostConstruct;
import org.springframework.stereotype.Component;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;

@Component
public class infra {
    /*
        private final PartRepository repository;

        public infra(PartRepository repository) {
            this.repository = repository;
        }

        @PostConstruct
        public void initializeData() throws IOException {
            // Tente carregar o arquivo a partir do classpath
            InputStream inputStream = getClass().getResourceAsStream("/images/img.png");

            if (inputStream == null) {
                throw new FileNotFoundException("Arquivo não encontrado: /images/img.png");
            }

            // Processar o arquivo (por exemplo, leitura ou configuração)
            System.out.println("Arquivo encontrado e carregado com sucesso!");
                byte[] imageData = inputStream.readAllBytes();
                Part part = new Part(new DataPart("CABEÇOTE",imageData,2));
                repository.save(part);



            byte[] imageData = sla.get().getImage();

            return ResponseEntity.ok()
                    .header(HttpHeaders.CONTENT_DISPOSITION, "inline")
                    .contentType(MediaType.IMAGE_PNG)
                    .body(imageData);
            }


    private final PartRepository repository;
    private final SectorRepository sectorRepository;
    public infra(PartRepository repository, SectorRepository sectorRepository) {
        this.repository = repository;
        this.sectorRepository = sectorRepository;
    }

    @PostConstruct
    public void initializeData() throws IOException {
        // Tente carregar o arquivo a partir do classpath
        InputStream inputStream = getClass().getResourceAsStream("/images/img.png");

        if (inputStream == null) {
            throw new FileNotFoundException("Arquivo não encontrado: /images/img.png");
        }

        // Processar o arquivo (por exemplo, leitura ou configuração)
        System.out.println("Arquivo encontrado e carregado com sucesso!");
        byte[] imageData = inputStream.readAllBytes();
        Sector sector = sectorRepository.save(new Sector(new DataSector("A","B","7")));
        Part part = new Part(new DataPart("CABEÇOTE", imageData, 2),sector);
        repository.save(part);
    }

     */
}

